<?xml version="1.0" encoding="UTF-8"?>
<org.eclipse.epf.uma:ContentDescription xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:org.eclipse.epf.uma="http://www.eclipse.org/epf/uma/1.0.6/uma.ecore" xmlns:epf="http://www.eclipse.org/epf" epf:version="1.5.1" xmi:id="-9nkncc4P9Ip6qiEf3qTprw" name="new_toolmentor,_zny7kJzLEeCKMNI98sdLuw" guid="-9nkncc4P9Ip6qiEf3qTprw" changeDate="2011-06-23T14:33:13.200+0200">
  <mainDescription>&lt;p>&#xD;
    In our example, we want the ‘calculate()’ function in the ‘CalculationService’ to be solved by the OpenModelica&#xD;
    compiler. To do this, we first create a simple Modelica model. Start by switching to the Modelica perspective in the&#xD;
    upper right corner of Eclipse (Figure 1). Create a folder for these models, for example ‘/models/Modelica’, then choose&#xD;
    ‘File -&amp;gt; New -&amp;gt; Modelica Class’, and create a class called “calculation” as shown in Figure 2. In Figure&amp;nbsp;3&#xD;
    we have modelled a simple equation for our example, which has a paramater ‘a’ (parameters are variables that can change&#xD;
    between simulations, but are constant during simulations) and a variable ‘x’.&#xD;
&lt;/p>&#xD;
&lt;p>&#xD;
    &lt;img alt=&quot;&quot; src=&quot;resources/1c.png&quot; width=&quot;326&quot; height=&quot;65&quot; />&#xD;
&lt;/p>&#xD;
&lt;p>&#xD;
    &lt;font face=&quot;Times, serif&quot;>&lt;font size=&quot;2&quot;>&lt;b>Figure&amp;nbsp;1 - Switching to the Modelica perspective.&lt;/b>&lt;/font>&lt;/font>&#xD;
&lt;/p>&#xD;
&lt;p>&#xD;
    &lt;img alt=&quot;&quot; src=&quot;resources/2c.png&quot; width=&quot;508&quot; height=&quot;506&quot; />&#xD;
&lt;/p>&#xD;
&lt;p>&#xD;
    &lt;font face=&quot;Times, serif&quot;>&lt;font size=&quot;2&quot;>&lt;b>Figure&amp;nbsp;2 - Creating a new Modelica class.&lt;/b>&lt;/font>&lt;/font>&#xD;
&lt;/p>&#xD;
&lt;p>&#xD;
    &lt;img alt=&quot;&quot; src=&quot;resources/3c.png&quot; width=&quot;291&quot; height=&quot;168&quot; />&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    &lt;font face=&quot;Times, serif&quot;>&lt;font size=&quot;2&quot;>&lt;b>Figure&amp;nbsp;3 - A simple modelica calculation.&lt;/b>&lt;/font>&lt;/font>&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    We can now teset the Modelica model by opening the OpenModelica console which sends and recieves messages from the&#xD;
    OpenModelica compiler (Figure 4).&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    &lt;img alt=&quot;&quot; src=&quot;resources/4c.png&quot; width=&quot;438&quot; height=&quot;158&quot; />&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    &lt;font face=&quot;Times, serif&quot;>&lt;font size=&quot;2&quot;>&lt;b>Figure&amp;nbsp;4 - OpenModelica Console.&lt;/b>&lt;/font>&lt;/font>&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot; lang=&quot;en-US&quot;>&#xD;
    Some useful commands are:&#xD;
&lt;/p>&#xD;
&lt;ul>&#xD;
    &lt;li>&#xD;
        &lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
            &lt;span lang=&quot;en-US&quot;>&lt;i>cd()&lt;/i>&lt;/span> &lt;span lang=&quot;en-US&quot;>– returns the current OpenModelica working&#xD;
            folder&lt;/span>&#xD;
        &lt;/p>&#xD;
    &lt;/li>&#xD;
    &lt;li>&#xD;
        &lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
            &lt;span lang=&quot;en-US&quot;>&lt;i>loadFile(&quot;c:/somelocation&quot;)&lt;/i>&lt;/span> &lt;span lang=&quot;en-US&quot;>– loads the specified file into&#xD;
            the compiler. P.S. the same can be achieved by opening the file in the OpenModelica editor plugin in&#xD;
            Eclipse.&lt;/span>&#xD;
        &lt;/p>&#xD;
    &lt;/li>&#xD;
    &lt;li>&#xD;
        &lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
            &lt;span lang=&quot;en-US&quot;>&lt;i>list(calculation&lt;/i>&lt;/span>&lt;span lang=&quot;en-US&quot;>&lt;i>)&lt;/i>&lt;/span> &lt;span lang=&quot;en-US&quot;>– shows&#xD;
            the contents of the model ‘calculation’ (requires the model to be loaded)&lt;/span>&#xD;
        &lt;/p>&#xD;
    &lt;/li>&#xD;
    &lt;li>&#xD;
        &lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
            &lt;i>simulate(calculation, startTime=0, stopTime=3)&lt;/i> – simulates the model ‘calculation’&#xD;
        &lt;/p>&#xD;
    &lt;/li>&#xD;
    &lt;li>&#xD;
        &lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
            &lt;i>plot(x)&lt;/i> – draws the simulation results for variable ‘x’ in last simulation (‘calculation’)&#xD;
        &lt;/p>&#xD;
    &lt;/li>&#xD;
    &lt;li>&#xD;
        &lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
            &lt;i>val(x,2)&lt;/i> – returns the value of ‘x’ after 2 seconds&#xD;
        &lt;/p>&#xD;
    &lt;/li>&#xD;
&lt;/ul>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    There are several other commands and variations of these commands, which are detailed in Section 1.3 in the&#xD;
    “OpenModelica User Guide” that comes with the OpenModelica installation.&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    Figure&amp;nbsp;5 shows some use of these commands in the OpenModelica console to the test and simulate the model we&#xD;
    created.&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    &lt;img alt=&quot;&quot; src=&quot;resources/5cc.png&quot; width=&quot;461&quot; height=&quot;265&quot; />&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    &lt;font face=&quot;Times, serif&quot;>&lt;font size=&quot;2&quot;>&lt;b>Figure&amp;nbsp;5 - Testing the model.&lt;/b>&lt;/font>&lt;/font>&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    The ‘simulate’ command creates a set of output files. The main one is the .plt file which contains a matrix of&#xD;
    coordinate results which can be visualised using the ‘plot’ command as done in Figure 5. The results are illustrated in&#xD;
    Figure 6. The total set of files generated by the OpenModelica simulation is shown in Figure 7. They are generated in&#xD;
    the current OpenModelica working folder, which in this case was “C:/OpenModelica1.5.0” (also given by the ‘cd()’&#xD;
    command). The purpose of these files and how they can be used is not documented in the OpenModelica documentation.&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    &lt;img alt=&quot;&quot; src=&quot;resources/6c.png&quot; width=&quot;536&quot; height=&quot;425&quot; />&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    &lt;font face=&quot;Times, serif&quot;>&lt;font size=&quot;2&quot;>&lt;b>Figure&amp;nbsp;6 - Visualisation of the simulation results.&lt;/b>&lt;/font>&lt;/font>&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    &lt;img alt=&quot;&quot; src=&quot;resources/7c.png&quot; width=&quot;371&quot; height=&quot;139&quot; />&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    &lt;font face=&quot;Times, serif&quot;>&lt;font size=&quot;2&quot;>&lt;b>Figure&amp;nbsp;7 - Output files from an OpenModelica&#xD;
    simulation.&lt;/b>&lt;/font>&lt;/font>&#xD;
&lt;/p>&#xD;
&lt;p style=&quot;MARGIN-BOTTOM: 0cm&quot;>&#xD;
    &lt;br />&#xD;
&lt;/p></mainDescription>
</org.eclipse.epf.uma:ContentDescription>
